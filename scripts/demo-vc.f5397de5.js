"use strict";var numberFormat=d3.format(".2f"),usChart=dc.geoChoroplethChart("#us-chart","demo-vc"),industryChart=dc.bubbleChart("#industry-chart","demo-vc"),roundChart=dc.bubbleChart("#round-chart","demo-vc");d3.csv("data/demo-vc.csv",function(a){var b=crossfilter(a),c=b.dimension(function(a){return a.State}),d=c.group().reduceSum(function(a){return a.Raised}),e=b.dimension(function(a){return a["Industry Group"]}),f=e.group().reduce(function(a,b){return a.amountRaised+=+b.Raised,a.deals+=+b.Deals,a},function(a,b){return a.amountRaised-=+b.Raised,a.amountRaised<.001&&(a.amountRaised=0),a.deals-=+b.Deals,a},function(){return{amountRaised:0,deals:0}}),g=b.dimension(function(a){return a.RoundClassDescr}),h=g.group().reduce(function(a,b){return a.amountRaised+=+b.Raised,a.deals+=+b.Deals,a},function(a,b){return a.amountRaised-=+b.Raised,a.amountRaised<.001&&(a.amountRaised=0),a.deals-=+b.Deals,a},function(){return{amountRaised:0,deals:0}});d3.json("data/demo-us-states.json",function(a){usChart.width(990).height(500).dimension(c).group(d).colors(d3.scale.quantize().range(["#E2F2FF","#C4E4FF","#9ED2FF","#81C5FF","#6BBAFF","#51AEFF","#36A2FF","#1E96FF","#0089FF","#0061B5"])).colorDomain([0,200]).colorCalculator(function(a){return a?usChart.colors()(a):"#ccc"}).overlayGeoJson(a.features,"state",function(a){return a.properties.name}).title(function(a){return"State: "+a.key+"\nTotal Amount Raised: "+numberFormat(a.value?a.value:0)+"M"}),industryChart.width(990).height(200).margins({top:10,right:50,bottom:30,left:60}).dimension(e).group(f).colors(d3.scale.category10()).keyAccessor(function(a){return a.value.amountRaised}).valueAccessor(function(a){return a.value.deals}).radiusValueAccessor(function(a){return a.value.amountRaised}).x(d3.scale.linear().domain([0,5e3])).r(d3.scale.linear().domain([0,4e3])).minRadiusWithLabel(15).elasticY(!0).yAxisPadding(100).elasticX(!0).xAxisPadding(200).maxBubbleRelativeSize(.07).renderHorizontalGridLines(!0).renderVerticalGridLines(!0).renderLabel(!0).renderTitle(!0).title(function(a){return a.key+"\nAmount Raised: "+numberFormat(a.value.amountRaised)+"M\nNumber of Deals: "+numberFormat(a.value.deals)}),industryChart.yAxis().tickFormat(function(a){return a+" deals"}),industryChart.xAxis().tickFormat(function(a){return a+"M"}),roundChart.width(990).height(200).margins({top:10,right:50,bottom:30,left:60}).dimension(g).group(h).colors(d3.scale.category10()).keyAccessor(function(a){return a.value.amountRaised}).valueAccessor(function(a){return a.value.deals}).radiusValueAccessor(function(a){return a.value.amountRaised}).x(d3.scale.linear().domain([0,5e3])).r(d3.scale.linear().domain([0,9e3])).minRadiusWithLabel(15).elasticY(!0).yAxisPadding(150).elasticX(!0).xAxisPadding(300).maxBubbleRelativeSize(.07).renderHorizontalGridLines(!0).renderVerticalGridLines(!0).renderLabel(!0).renderTitle(!0).title(function(a){return a.key+"\nAmount Raised: "+numberFormat(a.value.amountRaised)+"M\nNumber of Deals: "+numberFormat(a.value.deals)}),roundChart.yAxis().tickFormat(function(a){return a+" deals"}),roundChart.xAxis().tickFormat(function(a){return a+"M"}),dc.renderAll("demo-vc")})});